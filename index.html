<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Grids. Design, plot, print.</title>
    
    <!-- ============== VERSION CONFIGURATION ============== -->
    <!-- UPDATE THESE TWO LINES TO CHANGE ALL VERSION NUMBERS -->
    <script>
        window.APP_VERSION = '2025-09-26-01';     // For PWA cache updates
        window.CACHE_BUSTER = '41';               // For CSS/JS cache busting
    </script>
    <!-- =================================================== -->
    
    <!-- math.js CDN import: Added for robust equation parsing and evaluation -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjs/12.4.2/math.min.js"></script>
    <script src="https://unpkg.com/jspdf@latest/dist/jspdf.umd.min.js"></script>
    <script src="https://unpkg.com/svg2pdf.js@2.2.3/dist/svg2pdf.umd.min.js"></script>
    <link rel="icon" type="image/png" href="assets/icon-192-pwa.png">
    
    <!-- Dynamically load CSS and JS with version numbers -->
    <script>
        document.write('<link rel="stylesheet" href="css/style.css?v=' + window.CACHE_BUSTER + '">');
        document.write('<script type="module" src="js/main.js?v=' + window.CACHE_BUSTER + '"><\/script>');
    </script>
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#1976d2">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-title" content="GridPlotter">
    
    <!-- iOS Icons -->
    <link rel="apple-touch-icon" sizes="152x152" href="assets/icon-152-ios.png">
    <link rel="apple-touch-icon" sizes="167x167" href="assets/icon-167-ios.png">
    <link rel="apple-touch-icon" sizes="180x180" href="assets/icon-180-ios.png">
    
    <!-- Generic icons for PWA (Windows/Android/Chrome) -->
    <link rel="icon" type="image/png" sizes="192x192" href="assets/icon-192-pwa.png">
    <link rel="icon" type="image/png" sizes="512x512" href="assets/icon-512-pwa.png">
</head>
<body>
    <div class="main-flex-layout">
        <div class="card controls-card">
            <div style="display: flex; align-items: center; margin-bottom: 1px;">
                <div style="display:flex; align-items:center; gap:10px; margin-bottom:4px; line-height:1;">
                    <img src="assets/icon-192-pwa.png" alt="Grids Icon" width="40" height="40" style="display:block;">
                    <span style="font-family: Inter, sans-serif; font-size: 1.4rem; font-weight: 600; color: #111; line-height: 1; margin: 0;">
                        Grids.
                    </span>
                </div>
            </div>

            <fieldset class="controls-group">
                <legend class="static-legend">Grid Templates</legend>
                <div class="fieldset-content">
                    <div class="template-controls">
                        <div class="template-toggle">
                            <input type="radio" id="templateModeBuiltin" name="templateMode" value="builtin" checked>
                            <label for="templateModeBuiltin">Presets</label>
                            <input type="radio" id="templateModeUser" name="templateMode" value="user">
                            <label for="templateModeUser">Custom</label>
                        </div>
                        <div class="template-dropdown-container">
                            <select id="templates">
                                <option value="">Select a template...</option>
                                <option value="negativeAndPositive" selected>math: 4 Quadrant</option>
                                <option value="standardMath">math: 1 Quadrant</option>
                                <option value="trigGraph">math: Trig Graph (0 to 2π)</option>
                                <option value="trigGraphDegrees">math: Trig Graph (Degrees)</option>
                                <option value="polar">math: Polar Grid</option>
                                <option value="position">physics: Position vs Time</option>
                                <option value="velocity">physics: Velocity vs Time</option>
                                <option value="acceleration">physics: Acceleration vs Time</option>
                                <option value="graphPaperLetter_1_4in">paper: Letter 1/4 inch</option>
                                <option value="graphPaperLetter_1_5in">paper: Letter 1/5 inch</option>
                                <option value="graphPaperLetter_1cm">paper: Letter 1 cm</option>
                                <option value="graphPaperLetter_5mm">paper: Letter 5 mm</option>
                            </select>
                            <button type="button" id="saveTemplateBtn" class="save-template-btn-inline" style="display:none;">Save</button>
                        </div>
                    </div>
                </div>
            </fieldset>

            

            <fieldset class="controls-group collapsible" id="generalSettings">
                <legend>General Settings <span class="toggle-icon">▼</span></legend>
                <div class="fieldset-content">
                    <label for="paperStyle">Paper Style:
                        <select id="paperStyle">
                            <option value="grid" selected>Grid</option>
                            <option value="dot">Dot</option>
                            <option value="polar">Polar</option>
                        </select>
                    </label>

                    <label>Label Size:
                        <input type="number" id="squareSizeInput" value="15" min="10" step="5" max="30"
                        title ="This affects the font and label size but is not directly font size. Smaller values make the labels LARGER, and larger values make the labels SMALLER. Values between 10 and 20 seem to look best.">
                    </label>
                    
                    <div class="color-label-container">
                        <label for="minorGridColor">Minor Grid:</label>
                            <div class="color-input-wrapper">
                                <input type="color" id="minorGridColor" value="#a9a9a9">
                                <div class="color-swatches">
                                    <div class="color-swatch" style="background-color: #cccccc;" data-color="#cccccc"></div> <!-- Light Grey -->
                                    <div class="color-swatch" style="background-color: #a9a9a9;" data-color="#a9a9a9"></div> <!-- Dim Grey -->
                                    <div class="color-swatch" style="background-color: #646464;" data-color="#646464"></div> <!-- Medium Grey -->
                                    <div class="color-swatch" style="background-color: #323232;" data-color="#323232"></div> <!-- Darker Grey -->
                                </div>
                            </div>
                    </div>
                    <div class="color-label-container">
                        <label for="majorGridColor">Zero Line:</label>
                            <div class="color-input-wrapper">
                                <input type="color" id="majorGridColor" value="#555555">
                                <div class="color-swatches">
                                    <div class="color-swatch" style="background-color: #808080;" data-color="#808080"></div> <!-- Medium Grey -->
                                    <div class="color-swatch" style="background-color: #555555;" data-color="#555555"></div> <!-- Dark Grey -->
                                    <div class="color-swatch" style="background-color: #333333;" data-color="#333333"></div> <!-- Darker Grey -->
                                    <div class="color-swatch" style="background-color: #000000;" data-color="#000000"></div> <!-- Black -->
                                </div>
                            </div>
                        </label>
                    </div>
                    <label class="checkbox-label">Suppress '0' Label:
                        <input type="checkbox" id="suppressZeroLabel">
                    </label>
                    <label class="checkbox-label">Show Axes:
                    <input type="checkbox" id="showAxes" checked>
                    </label>

                    <label class="checkbox-label">Show Axis Arrows:
                        <input type="checkbox" id="showAxisArrows" checked>
                    </label>
                </div>
            </fieldset>

            <!-- Polar Controls: HIDDEN by default, shown only for Polar -->
            <div id="polarControls" style="display: none; margin-bottom: 12px; margin-top: 8px;">
                <label>
                    Number of Circles:
                    <input type="number" id="polarNumCircles" min="1" max="24" value="8" style="width: 3em;">
                </label>
                <label style="margin-left: 1em;">
                    Number of Radial Divisions:
                    <input type="number" id="polarNumRadials" min="1" max="36" value="12" style="width: 3em;">
                </label>
                <label style="margin-left: 1em;">
                    Degrees per Circle (outer ring):
                    <input type="number" id="polarDegrees" min="1" max="360" value="360" style="width: 4em;">
                </label>
            </div>

            <div id="cartesianAxisSettings">
                <fieldset class="controls-group collapsible" id="yAxisSettings">
                    <legend>y-Axis Settings <span class="toggle-icon">▼</span></legend>
                    <div class="fieldset-content">
                        <label>y Min:
                            <input type="number" id="yMin" value="0">
                        </label>
                        <label>y Max:
                            <input type="number" id="yMax" value="10">
                        </label>
                        <label>Increment:
                            <input type="number" id="yIncrement" value="1" min="0.001" step="0.1"
                            title="Sets the numerical value represented by each minor grid square. For example, '1' means each small square counts as 1 unit.">
                        </label>
                        <label>Label Nth Step:
                            <input type="number" id="yLabelEvery" value="1" min="1" step="1">
                        </label>
                        <label>Axis Label:
                            <input type="text" id="yAxisLabel" value="y">
                        </label>
                        <label class="checkbox-label">Numbers on Axis:
                            <input type="checkbox" id="yLabelOnZero" checked>
                        </label>
                        <label class="checkbox-label">Axis Label on Top:
                            <input type="checkbox" id="yAxisLabelOnTop">
                        </label>
                    </div>
                </fieldset>

                <fieldset class="controls-group collapsible" id="xAxisSettings">
                    <legend>x-Axis Settings <span class="toggle-icon">▼</span></legend>
                    <div class="fieldset-content">
                        <label>x-Axis Label Type:
                            <select id="xAxisLabelType">
                                <option value="numbers">Numbers</option>
                                <option value="radians">Radians (π)</option>
                                <option value="degrees">Degrees (°)</option> <!-- NEW OPTION -->
                            </select>
                        </label>

                        <div id="numericalXAxisSettings">
                            <label>x Min:
                                <input type="number" id="xMin" value="0">
                            </label>
                            <label>x Max:
                                <input type="number" id="xMax" value="10">
                            </label>
                            <label>Increment:
                                <input type="number" id="xIncrement" value="1" min="0.001" step="0.1"
                                title="Sets the numerical value represented by each minor grid square. For example, '1' means each small square counts as 1 unit.">
                            </label>
                        </div>

                        <div id="radianXAxisSettings" class="hidden">
                            <label>x Min (π multiples):
                                <input type="number" id="xMinRadians" value="0" step="0.5">
                            </label>
                            <label>x Max (π multiples):
                                <input type="number" id="xMaxRadians" value="2" step="0.5">
                            </label>
                            <label>Radian Step Multiplier (e.g., 0.5 for π/2):
                                <input type="number" id="radianStepMultiplier" value="0.5" min="0.01" step="0.01">
                            </label>
                            <label>Grid Units per Radian Step:
                                <input type="number" id="xGridUnitsPerRadianStep" value="3" min="1" step="1">
                            </label>
                        </div>

                        <label>Label Nth Step:
                            <input type="number" id="xLabelEvery" value="1" min="1" step="1">
                        </label>
                        <label>Axis Label:
                            <input type="text" id="xAxisLabel" value="x">
                        </label>
                        <label class="checkbox-label">Numbers on Axis:
                            <input type="checkbox" id="xLabelOnZero" checked>
                        </label>
                        <label class="checkbox-label">Axis Label on Right:
                            <input type="checkbox" id="xAxisLabelOnRight">
                        </label>
                    </div>
                </fieldset>
            </div>

            <fieldset class="controls-group collapsible" id="equationPlotting">
                <div class="fieldset-header">
                    <span class="info-icon" tabindex="0" id="equationInfoIcon">i</span>
                    <legend>
                        Equation Plotting
                        <span class="toggle-icon">▼</span>
                    </legend>
                </div>

                <div class="fieldset-content">
                    <div class="color-label-container">
                        <label for="equationColor">Line Colour: </label>
                            <div class="color-input-wrapper">
                                <input type="color" id="equationColor" value="#000000"> <!-- default color -->
                                <div class="color-swatches">
                                    <div class="color-swatch" style="background-color: #000000;" data-color="#000000"></div> <!-- Black -->
                                    <div class="color-swatch" style="background-color: #808080;" data-color="#808080"></div> <!-- Grey -->
                                    <div class="color-swatch" style="background-color: #FF0000;" data-color="#FF0000"></div> <!-- Red -->
                                    <div class="color-swatch" style="background-color: #0000FF;" data-color="#0000FF"></div> <!-- Blue -->
                                    <div class="color-swatch" style="background-color: #008000;" data-color="#008000"></div> <!-- Green -->
                                    <div class="color-swatch" style="background-color: #800080;" data-color="#800080"></div> <!-- Purple -->
                                </div>
                            </div>
                        </label>
                    </div>
                    <label>Equation:
                        <!-- Updated title attribute to reflect math.js syntax -->
                        <input type="text" id="equationInput" placeholder="e.g., sin(x), x^2, -1/2x+3"
                                 title="Enter functions using math.js syntax (e.g., sin(x), cos(x), tan(x), asin(x), acos(x), atan(x), sqrt(x), abs(x), exp(x), log(x)=ln(x), log10(x), log2(x), nthRoot(x,n), pi, e). Use ^ for exponentiation (e.g., x^2). Implied multiplication is supported (e.g., 2x). Angles are in radians by default.
">
                    </label>
                    <label>Domain Start (optional):
                        <input type="number" id="domainStart" placeholder="e.g., -3" step="any" title="Minimum x-value for the function's domain.">
                    </label>
                    <label>Domain End (optional):
                        <input type="number" id="domainEnd" placeholder="e.g., 12" step="any" title="Maximum x-value for the function's domain.">
                    </label>
                    <label>Inequality Type:
                        <select id="inequalityType">
                            <option value="=">=</option>
                            <option value="<">&lt;</option>
                            <option value=">">&gt;</option>
                            <option value="<=">&le;</option>
                            <option value=">=">&ge;</option>
                        </select>
                    </label>
                    <label>Line Style:
                        <select id="equationLineStyle">
                            <option value="solid">Solid</option>
                            <option value="dashed">Dashed</option>
                            <option value="dots">Dots</option>
                            <option value="dotsAndDash">Dots and Dash</option>
                        </select>
                    </label>
                    <label>Label Type:
                        <select id="equationLabelType" title="Select custom and leave blank for no label">
                            <option value="custom">Custom Label</option>
                            <option value="equation">Equation Text</option>
                            
                        </select>
                    </label>
                    <label id="customLabelContainer" class="hidden">Custom Label:
                        <input type="text" id="equationCustomLabel" placeholder="leave blank for no label"
                        title="Leave blank for no label">
                    </label>
                    <!-- NEW: This is the per-equation line arrow checkbox -->
                    <label class="checkbox-label">Show arrows for this equation:
                        <input type="checkbox" id="showLineArrows" checked>
                    </label>
                    
                    <!-- Primary Action Buttons -->
                    <div style="margin-bottom:8px;">
                        <button id="addOrUpdateEquationButton" style="width:100%;">Add Equation</button>
                        <button id="cancelEditButton" class="hidden" style="width:100%;">Cancel Edit</button>
                    </div>
                    
                    <!-- Management Buttons -->
                    <div class="button-group">
                        <button id="resetEquationLabelPositionsBtn" type="button">Reset Label Positions</button>
                        <button id="clearEquationsBtn" type="button">Clear Equations</button>
                    </div>
                    
                    <div id="equationsList">
                    </div>
                </div>
            </fieldset>
            <!-- Points & Segments controls -->
            <fieldset class="controls-group collapsible" id="pointsSection">
                <div class="fieldset-header">
                    <span class="info-icon" tabindex="0" id="pointsInfoIcon">i</span>
                    <legend>
                        Points &amp; Segments <span class="toggle-icon">▼</span>
                    </legend>
                </div>
                <div class="fieldset-content">
                    <!-- Color Controls at the top -->
                    <div style="display:flex; gap:8px; flex-wrap:wrap; margin-bottom:10px;">
                        <div class="color-label-container" style="margin-bottom:0;">
                            <label for="pointsDotColor">Point:</label>
                            <div class="color-input-wrapper">
                                <input type="color" id="pointsDotColor" value="#000000">
                                <div class="color-swatches">
                                    <div class="color-swatch" style="background-color: #000000;" data-color="#000000"></div>
                                    <div class="color-swatch" style="background-color: #808080;" data-color="#808080"></div>
                                    <div class="color-swatch" style="background-color: #FF0000;" data-color="#FF0000"></div>
                                    <div class="color-swatch" style="background-color: #0000FF;" data-color="#0000FF"></div>
                                    <div class="color-swatch" style="background-color: #008000;" data-color="#008000"></div>
                                    <div class="color-swatch" style="background-color: #800080;" data-color="#800080"></div>
                                </div>
                            </div>
                        </div>
                        <div class="color-label-container" style="margin-bottom:0;">
                            <label for="pointsLineColor">Line:</label>
                            <div class="color-input-wrapper">
                                <input type="color" id="pointsLineColor" value="#000000">
                                <div class="color-swatches">
                                    <div class="color-swatch" style="background-color: #000000;" data-color="#000000"></div>
                                    <div class="color-swatch" style="background-color: #808080;" data-color="#808080"></div>
                                    <div class="color-swatch" style="background-color: #FF0000;" data-color="#FF0000"></div>
                                    <div class="color-swatch" style="background-color: #0000FF;" data-color="#0000FF"></div>
                                    <div class="color-swatch" style="background-color: #008000;" data-color="#008000"></div>
                                    <div class="color-swatch" style="background-color: #800080;" data-color="#800080"></div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Bulk Entry Section -->
                    <fieldset id="bulkEntrySection" class="collapsible collapsed" style="margin-bottom:16px;">
                        <legend>Bulk Entry <span class="toggle-icon">▼</span></legend>
                        <div class="fieldset-content">
                            <div style="margin-bottom:8px;">
                                <label for="bulkPointsInput" style="display:block; margin-bottom:4px; font-size:0.9em; color:#555; font-weight:bold;">Enter multiple points:</label>
                                <textarea id="bulkPointsInput" placeholder="Enter points as x,y or x,y,label or x,y,label,curveIntensity&#10;Examples:&#10;0,1&#10;2,1 4,2&#10;0,1,A 2,1,B 4,2,C&#10;0,1,A,39.2 4,78.4,B 8,0,C" style="width:100%; height:110px; padding:8px; border:1px solid #ccc; border-radius:4px; font-size:0.85em; font-family:monospace; resize:vertical;"></textarea>
                            </div>
                            <button id="addBulkPointsBtn" type="button" style="padding:6px 12px; font-size:0.85em;">Add Points</button>
                        </div>
                    </fieldset>

                    <div style="display:flex; gap:12px; align-items:end; margin-bottom:12px;">
                        <div style="display:flex; flex-direction:column; gap:4px;">
                            <label for="pointX" style="margin:0; font-size:0.85em; color:#666;">x</label>
                            <input type="number" id="pointX" step="any" placeholder="1.5" style="width:60px; padding:6px; font-size:0.85em;">
                        </div>
                        <div style="display:flex; flex-direction:column; gap:4px;">
                            <label for="pointY" style="margin:0; font-size:0.85em; color:#666;">y</label>
                            <input type="number" id="pointY" step="any" placeholder="-2" style="width:60px; padding:6px; font-size:0.85em;">
                        </div>
                        <button id="addPointBtn" type="button" style="flex:1; padding:6px 12px; font-size:0.85em;">Add Point</button>
                    </div>
                    <div style="margin-bottom:12px;">
                        <label>Label (optional):
                            <input type="text" id="pointLabel" maxlength="40" placeholder="e.g., A">
                        </label>
                    </div>
                    <div style="margin-bottom:12px;">
                        <label>Curve Intensity (optional):
                            <input type="number" id="pointCurveIntensity" step="any" placeholder="e.g., 2 or -2">
                        </label>
                        <div id="slopeInfo" style="font-size:0.85em; color:#666; margin-top:4px;"></div>
                    </div>
                    <div style="margin-bottom:12px;">
                        <label>Point Size:
                            <input type="number" id="pointsDotSize" min="1" max="20" value="3">
                        </label>
                    </div>
                    <div style="display:flex; gap:12px; flex-wrap:wrap; margin-bottom:12px;">
                        <label class="checkbox-label">Connect Points:
                            <input type="checkbox" id="pointsConnect" checked>
                        </label>
                        <label class="checkbox-label">Show Labels:
                            <input type="checkbox" id="pointsShowLabels" checked>
                        </label>
                        <label class="checkbox-label">Fill Area Under Curve:
                            <input type="checkbox" id="pointsFillArea">
                        </label>
                    </div>
                    
                    <!-- Area Fill Colors - Only visible when Fill Area is checked -->
                    <div id="areaFillColors" style="display:none; margin-bottom:12px; padding:8px; background-color:#f9f9f9; border-radius:4px;">
                        <div style="display:flex; gap:12px; flex-wrap:wrap;">
                            <div class="color-label-container" style="margin-bottom:0;">
                                <label for="pointsAreaPositiveColor">Positive Area:</label>
                                <div class="color-input-wrapper">
                                    <input type="color" id="pointsAreaPositiveColor" value="#90EE90">
                                    <div class="color-swatches">
                                        <div class="color-swatch" style="background-color: #90EE90;" data-color="#90EE90"></div>
                                        <div class="color-swatch" style="background-color: #87CEEB;" data-color="#87CEEB"></div>
                                        <div class="color-swatch" style="background-color: #FFB6C1;" data-color="#FFB6C1"></div>
                                        <div class="color-swatch" style="background-color: #DDA0DD;" data-color="#DDA0DD"></div>
                                    </div>
                                </div>
                            </div>
                            <div class="color-label-container" style="margin-bottom:0;">
                                <label for="pointsAreaNegativeColor">Negative Area:</label>
                                <div class="color-input-wrapper">
                                    <input type="color" id="pointsAreaNegativeColor" value="#FFB6C1">
                                    <div class="color-swatches">
                                        <div class="color-swatch" style="background-color: #FFB6C1;" data-color="#FFB6C1"></div>
                                        <div class="color-swatch" style="background-color: #FFA07A;" data-color="#FFA07A"></div>
                                        <div class="color-swatch" style="background-color: #F0E68C;" data-color="#F0E68C"></div>
                                        <div class="color-swatch" style="background-color: #DDA0DD;" data-color="#DDA0DD"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Calculate Area Button -->
                    <div style="margin-bottom:16px;">
                        <button id="calculateNetAreaBtn" class="primary-btn" type="button" style="width:100%;">
                            Calculate Area
                        </button>
                        <div id="netAreaResult" style="margin-top:6px; font-weight:500; color:#1976d2; line-height:1.4;"></div>
                    </div>

                    <div class="button-group" style="margin-top:8px;">
                        <button id="clearPointsBtn" type="button">Clear Points</button>
                        <button id="resetLabelPositionsBtn" type="button">Reset Label Positions</button>
                    </div>

                    <div id="pointsList" style="margin-top:8px;"></div>
                </div>
            </fieldset>
        </div>

        <div class="card canvas-card sticky-canvas">
            <svg id="gridSVG"></svg>
            <div id="gridErrorMessage"></div>
           <div class="button-row">
                <button id="downloadSVG">Export as SVG</button>
                <button id="exportPNG">Export as PNG</button>
                <button id="exportPDF">Export as PDF</button>
            </div>
        </div>
    </div>
    <!-- Privacy Policy Footer - Moved to be the very last child of body -->
    <div class="footer-privacy">
      <a href="#" id="privacyPolicyLink" class="privacy-link">Privacy Policy</a>
    </div>

    <script>
if ('serviceWorker' in navigator) {
  (async () => {
    try {
      console.log(`Registering service worker with version: ${window.APP_VERSION}`);
      
      // Use relative path for GitHub Pages compatibility
      const reg = await navigator.serviceWorker.register(`sw.js?v=${window.APP_VERSION}`);
      console.log('Service worker registered successfully');

      // Check for update right now (i.e., on app open)
      reg.update().catch(() => {});

      // When the new SW takes control, reload to show the new version
      let refreshing = false;
      navigator.serviceWorker.addEventListener('controllerchange', () => {
        if (refreshing) return;
        refreshing = true;
        console.log('Service worker updated, reloading page...');
        window.location.reload();
      });
      
      // Make cache clearing available globally for debugging
      window.clearAppCache = async function() {
        const cacheNames = await caches.keys();
        await Promise.all(cacheNames.map(name => caches.delete(name)));
        if ('serviceWorker' in navigator) {
          const registrations = await navigator.serviceWorker.getRegistrations();
          await Promise.all(registrations.map(reg => reg.unregister()));
        }
        console.log('All caches cleared. Please refresh the page.');
        window.location.reload();
      };
    } catch (error) {
      console.error('Service worker registration failed:', error);
    }
  })();
}
</script>
    <!-- Equation Plotting Info Modal -->
    <div id="equationInfoModal" class="info-modal">
        <div class="info-modal-content">
            <h2>📈 Equation Plotting Guide</h2>
            <div class="info-modal-body">
                <h3>🔧 Equation Functions</h3>
                <ul>
                    <li><strong>Operators:</strong> +, −, *, /, ^ (exponent), parentheses (). Implied multiplication supported (e.g., <code>2x</code>, <code>(x)(x+1)</code>).</li>
                    <li><strong>Trig:</strong> <code>sin</code>, <code>cos</code>, <code>tan</code>, <code>sec</code>, <code>csc</code>, <code>cot</code>; inverses <code>asin</code>, <code>acos</code>, <code>atan</code>; hyperbolic <code>sinh</code>, <code>cosh</code>, <code>tanh</code>, and inverses <code>asinh</code>, <code>acosh</code>, <code>atanh</code>. Angles are in <strong>radians</strong>; use units for degrees (e.g., <code>sin(30 deg)</code>).</li>
                    <li><strong>Exponentials & logs:</strong> <code>exp(x)</code> is <em>e^x</em> (you can write <code>exp(x)</code> <strong>or</strong> <code>e^x</code>). <code>log(x)</code> is the natural log (<em>ln(x)</em>). For other bases use <code>log(x, b)</code> or the shortcuts <code>log10(x)</code>, <code>log2(x)</code>.</li>
                    <li><strong>Roots & powers:</strong> <code>sqrt(x)</code>, <code>nthRoot(x, n)</code>. Use <code>^</code> for powers (e.g., <code>x^2</code>).</li>
                    <li><strong>Other common:</strong> <code>abs</code>, <code>sign</code>, <code>floor</code>, <code>ceil</code>, <code>round</code>, <code>min</code>, <code>max</code>, <code>mod</code>, <code>hypot</code>.</li>
                    <li><strong>Constants:</strong> <code>pi</code>, <code>e</code>, <code>tau</code>.</li>
                </ul>
                
                <h3>💡 Examples</h3>
                <ul>
                    <li><code>x^2</code> - Simple quadratic</li>
                    <li><code>3x+5</code> - Linear function</li>
                    <li><code>sin(x)</code> - Sine wave</li>
                    <li><code>e^x*cos(x)</code> - Exponential cosine</li>
                    <li><code>log10(x)</code> - Base-10 logarithm</li>
                </ul>
                
                <h3>⚡ Quick Entry Tips</h3>
                <ul>
                    <li><strong>Press Enter:</strong> After typing an equation, press <kbd>Enter</kbd> to add it instantly (no need to click the button!)</li>
                    <li><strong>Live Preview:</strong> See your equation plotted in real-time as you type</li>
                    <li><strong>Drag Labels:</strong> Click and drag equation labels to reposition them on the graph</li>
                </ul>
            </div>
            <button id="closeEquationInfo" class="info-close-btn">Close</button>
        </div>
    </div>

    <!-- Points & Segments Info Modal -->
    <div id="pointsInfoModal" class="info-modal">
        <div class="info-modal-content">
            <h2>🎯 Points & Segments Guide</h2>
            <div class="info-modal-body">
                <h3>🎯 Basic Usage</h3>
                <p><strong>Curve Intensity</strong> creates smooth curved connections between points instead of straight lines.</p>
                <ul>
                    <li><strong>Leave empty</strong> = straight line (linear motion)</li>
                    <li><strong>Positive numbers</strong> = curves upward from the straight line</li>
                    <li><strong>Negative numbers</strong> = curves downward from the straight line</li>
                    <li><strong>Tip:</strong> Press <kbd>Enter</kbd> after entering the Y value to quickly add points</li>
                </ul>

                <h3>📊 For Physics Graphs</h3>
                <p><strong>Position-Time Graphs:</strong></p>
                <ul>
                    <li>Plot your start point, max point, and end point from a calculated motion, then use the initial velocity (Vi) as curve intensity to model the graph</li>
                    <li>Example: Object thrown upward at 39.2 m/s → use curve intensity = 39.2</li>
                    <li>Creates proper parabolic motion matching physics equations</li>
                    <li><strong>Note:</strong> This might be more easily modeled with the actual equation and domain/range restrictions in the Equation Plotting mode</li>
                </ul>

                <h3>🔗 Slope Continuity</h3>
                <p>The system automatically:</p>
                <ul>
                    <li><strong>Calculates final slope</strong> at each curved point</li>
                    <li><strong>Suggests next Y coordinate</strong> when you type X (blue highlight)</li>
                    <li><strong>Maintains smooth motion</strong> for realistic physics</li>
                </ul>

                <h3>📝 Bulk Entry Format</h3>
                <p><code>x,y,label,curveIntensity</code></p>
                <p>Example: <code>0,0,Start,39.2 4,78.4,Peak 8,0,End</code></p>
            </div>
            <button id="closePointsInfo" class="info-close-btn">Close</button>
        </div>
    </div>

    <!-- Privacy Policy Modal -->
<div id="privacyPolicyModal" class="privacy-modal">
    <div class="privacy-modal-content">
        <h2>Privacy Policy</h2>
        <p>
            This website does not collect, store, or share any personal information.<br><br>
            &bull; No login is required.<br>
            &bull; No cookies or tracking technologies are used.<br>
            &bull; No information is stored on our servers or your device.<br>
            &bull; No analytics or third-party tracking is in use.<br><br>
            All features are fully client-side. Your privacy is completely respected while using this site.
        </p>
        <button id="closePrivacyPolicy" class="privacy-close-btn">Close</button>
    </div>
</div>

</body>
</html>

